TODO: make more modular and user-friendly with options.
